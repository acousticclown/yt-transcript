[phases.setup]
cmds = [
  # Ensure packages folder exists (it should be in apps/api/packages/ from git)
  "mkdir -p packages/prompts || true",
  # If packages folder doesn't exist, copy from parent monorepo (if building from root)
  "if [ ! -d packages/prompts ] && [ -d ../../packages/prompts ]; then cp -r ../../packages/* packages/; fi"
]

[phases.install]
cmds = [
  "NODE_ENV=development npm install",
  "npx prisma generate"
]

[start]
cmd = "sh -c '(npm run start 2>&1) | grep -v \"npm warn config production\"'"

